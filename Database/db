--
-- PostgreSQL database dump
--

-- Dumped from database version 14.1
-- Dumped by pg_dump version 14.1

-- Started on 2022-07-18 15:07:01

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 223 (class 1255 OID 16910)
-- Name: truncate_tables(character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.truncate_tables(username character varying) RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
    statements CURSOR FOR
        SELECT tablename FROM pg_tables
        WHERE tableowner = username AND schemaname = 'public';
BEGIN
    FOR stmt IN statements LOOP
        EXECUTE 'TRUNCATE TABLE ' || quote_ident(stmt.tablename) || ' CASCADE;';
    END LOOP;
END;
$$;


ALTER FUNCTION public.truncate_tables(username character varying) OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 222 (class 1259 OID 16918)
-- Name: alarms; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.alarms (
    id UUID NOT NULL,
    "time" date,
    snooze integer
);


ALTER TABLE public.alarms OWNER TO postgres;

--
-- TOC entry 214 (class 1259 OID 16792)
-- Name: alarms_o_tasks; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.alarms_o_tasks (
    id UUID NOT NULL,
    id_alarm UUID NOT NULL,
    id_task UUID NOT NULL
);


ALTER TABLE public.alarms_o_tasks OWNER TO postgres;


--
-- TOC entry 211 (class 1259 OID 16724)
-- Name: categories; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.categories (
    id UUID NOT NULL,
    name text
);


ALTER TABLE public.categories OWNER TO postgres;

--
-- TOC entry 210 (class 1259 OID 16717)
-- Name: frequencies; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.frequencies (
    id UUID NOT NULL,
    scope text NOT NULL,
    placements integer[] NOT NULL,
    hour integer NOT NULL
);


ALTER TABLE public.frequencies OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 16835)
-- Name: items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.items (
    id UUID NOT NULL,
    id_shop UUID NOT NULL,
    name text NOT NULL,
    description text,
    base_price integer NOT NULL,
    price integer
);


ALTER TABLE public.items OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 16868)
-- Name: looking_forwardables; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.looking_forwardables (
    id UUID NOT NULL,
    name text NOT NULL,
    description text,
    date date
);


ALTER TABLE public.looking_forwardables OWNER TO postgres;

--
-- TOC entry 212 (class 1259 OID 16731)
-- Name: priorities; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.priorities (
    id UUID NOT NULL,
    severity integer,
    difficulty integer,
    prioretized boolean,
    progressive boolean
);


ALTER TABLE public.priorities OWNER TO postgres;

--
-- TOC entry 209 (class 1259 OID 16712)
-- Name: responsibilities; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.responsibilities (
    id UUID NOT NULL,
    id_bou UUID NOT NULL,
    due DATE NOT NULL,
    penalty integer,
    reward integer
);


ALTER TABLE public.responsibilities OWNER TO postgres;

--
-- TOC entry 216 (class 1259 OID 16827)
-- Name: shops; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.shops (
    id UUID NOT NULL,
    balance integer DEFAULT 0 NOT NULL
);


ALTER TABLE public.shops OWNER TO postgres;


--
-- TOC entry 219 (class 1259 OID 16860)
-- Name: bous; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.bous (
    id UUID NOT NULL,
    balance integer DEFAULT 0 NOT NULL,
    name text NOT NULL,
    id_shop UUID NOT NULL
);


ALTER TABLE public.bous OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16875)
-- Name: bous_o_looking_forwardables; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.bous_o_looking_forwardables (
    id UUID NOT NULL,
    id_bou UUID NOT NULL,
    id_looking_forwardable UUID NOT NULL
);


ALTER TABLE public.bous_o_looking_forwardables OWNER TO postgres;

--
-- TOC entry 213 (class 1259 OID 16750)
-- Name: tasks; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tasks (
    id UUID NOT NULL,
    id_responsibility UUID NOT NULL,
    id_frequency UUID NOT NULL,
    id_category UUID NOT NULL,
    id_priority UUID NOT NULL,
    id_parent_task UUID,
    title text NOT NULL,
    description text,
    slack integer,
    dailygoal boolean,
    due date,
    finished boolean
);


ALTER TABLE public.tasks OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 16849)
-- Name: transactions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.transactions (
    id UUID NOT NULL,
    id_item UUID NOT NULL,
    id_buyer UUID NOT NULL,
    date date,
    price integer NOT NULL
);


ALTER TABLE public.transactions OWNER TO postgres;

--
-- TOC entry 3432 (class 0 OID 16918)
-- Dependencies: 222
-- Data for Name: alarms; Type: TABLE DATA; Schema: public; Owner: postgres
--


--
-- TOC entry 3263 (class 2606 OID 16924)
-- Name: alarms alarms_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alarms
    ADD CONSTRAINT alarms_id_key UNIQUE (id);


--
-- TOC entry 3239 (class 2606 OID 16823)
-- Name: alarms_o_tasks alarms_o_tasks_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alarms_o_tasks
    ADD CONSTRAINT alarms_o_tasks_id_key UNIQUE (id);


--
-- TOC entry 3241 (class 2606 OID 16801)
-- Name: alarms_o_tasks alarms_o_tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alarms_o_tasks
    ADD CONSTRAINT alarms_o_tasks_pkey PRIMARY KEY (id);


--
-- TOC entry 3265 (class 2606 OID 16922)
-- Name: alarms alarms_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alarms
    ADD CONSTRAINT alarms_pkey PRIMARY KEY (id);


--
-- TOC entry 3261 (class 2606 OID 16901)
-- Name: bous_o_looking_forwardables bous_o_looking_forwardables_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bous_o_looking_forwardables
    ADD CONSTRAINT bous_o_looking_forwardables_pkey PRIMARY KEY (id);


--
-- TOC entry 3257 (class 2606 OID 16867)
-- Name: bous bous_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bous
    ADD CONSTRAINT bous_pkey PRIMARY KEY (id);


--
-- TOC entry 3227 (class 2606 OID 16769)
-- Name: categories categories_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_id_key UNIQUE (id);


--
-- TOC entry 3229 (class 2606 OID 16730)
-- Name: categories categories_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.categories
    ADD CONSTRAINT categories_pkey PRIMARY KEY (id);


--
-- TOC entry 3223 (class 2606 OID 16767)
-- Name: frequencies frequencies_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.frequencies
    ADD CONSTRAINT frequencies_id_key UNIQUE (id);


--
-- TOC entry 3225 (class 2606 OID 16723)
-- Name: frequencies frequencies_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.frequencies
    ADD CONSTRAINT frequencies_pkey PRIMARY KEY (id);


--
-- TOC entry 3251 (class 2606 OID 16843)
-- Name: items items_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.items
    ADD CONSTRAINT items_id_key UNIQUE (id);


--
-- TOC entry 3253 (class 2606 OID 16841)
-- Name: items items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.items
    ADD CONSTRAINT items_pkey PRIMARY KEY (id);


--
-- TOC entry 3259 (class 2606 OID 16874)
-- Name: looking_forwardables looking_forwardables_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.looking_forwardables
    ADD CONSTRAINT looking_forwardables_pkey PRIMARY KEY (id);



--
-- TOC entry 3231 (class 2606 OID 16765)
-- Name: priorities priorities_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.priorities
    ADD CONSTRAINT priorities_id_key UNIQUE (id);


--
-- TOC entry 3233 (class 2606 OID 16735)
-- Name: priorities priorities_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.priorities
    ADD CONSTRAINT priorities_pkey PRIMARY KEY (id);


--
-- TOC entry 3219 (class 2606 OID 16758)
-- Name: responsibilities responsibilities_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.responsibilities
    ADD CONSTRAINT responsibilities_id_key UNIQUE (id);


--
-- TOC entry 3221 (class 2606 OID 16716)
-- Name: responsibilities responsibilities_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.responsibilities
    ADD CONSTRAINT responsibilities_pkey PRIMARY KEY (id);


--
-- TOC entry 3247 (class 2606 OID 16834)
-- Name: shops shops_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.shops
    ADD CONSTRAINT shops_id_key UNIQUE (id);


--
-- TOC entry 3249 (class 2606 OID 16832)
-- Name: shops shops_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.shops
    ADD CONSTRAINT shops_pkey PRIMARY KEY (id);


--
-- TOC entry 3235 (class 2606 OID 16791)
-- Name: tasks tasks_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_id_key UNIQUE (id);


--
-- TOC entry 3237 (class 2606 OID 16756)
-- Name: tasks tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_pkey PRIMARY KEY (id);


--
-- TOC entry 3255 (class 2606 OID 16853)
-- Name: transactions transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transactions
    ADD CONSTRAINT transactions_pkey PRIMARY KEY (id);


--
-- TOC entry 3272 (class 2606 OID 16925)
-- Name: alarms_o_tasks alarms_o_tasks_id_alarm_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bous
    ADD CONSTRAINT bous_fkey FOREIGN KEY (id_shop) REFERENCES public.shops(id) NOT VALID;


ALTER TABLE ONLY public.alarms_o_tasks
    ADD CONSTRAINT alarms_o_tasks_id_alarm_fkey FOREIGN KEY (id_alarm) REFERENCES public.alarms(id) NOT VALID;


--
-- TOC entry 3271 (class 2606 OID 16807)
-- Name: alarms_o_tasks alarms_o_tasks_id_task_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alarms_o_tasks
    ADD CONSTRAINT alarms_o_tasks_id_task_fkey FOREIGN KEY (id_task) REFERENCES public.tasks(id) NOT VALID;


--
-- TOC entry 3278 (class 2606 OID 16880)
-- Name: bous_o_looking_forwardables bous_o_looking_forwardables_id_bou_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bous_o_looking_forwardables
    ADD CONSTRAINT bous_o_looking_forwardables_id_bou_fkey FOREIGN KEY (id_bou) REFERENCES public.bous(id);


--
-- TOC entry 3279 (class 2606 OID 16885)
-- Name: bous_o_looking_forwardables bous_o_looking_forwardables_id_looking_forwardable_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bous_o_looking_forwardables
    ADD CONSTRAINT bous_o_looking_forwardables_id_looking_forwardable_fkey FOREIGN KEY (id_looking_forwardable) REFERENCES public.looking_forwardables(id);


--
-- TOC entry 3275 (class 2606 OID 16844)
-- Name: items items_id_shop_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.items
    ADD CONSTRAINT items_id_shop_fkey FOREIGN KEY (id_shop) REFERENCES public.shops(id) NOT VALID;


--
-- TOC entry 3266 (class 2606 OID 16890)
-- Name: responsibilities responsibilities_id_bou_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.responsibilities
    ADD CONSTRAINT responsibilities_id_bou_fkey FOREIGN KEY (id_bou) REFERENCES public.bous(id) NOT VALID;


--
-- TOC entry 3269 (class 2606 OID 16775)
-- Name: tasks tasks_id_category_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_id_category_fkey FOREIGN KEY (id_category) REFERENCES public.categories(id) NOT VALID;


ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_id_parent_task_fkey FOREIGN KEY (id_parent_task) REFERENCES public.tasks(id) NOT VALID;


--
-- TOC entry 3268 (class 2606 OID 16770)
-- Name: tasks tasks_id_frequency_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_id_frequency_fkey FOREIGN KEY (id_frequency) REFERENCES public.frequencies(id) NOT VALID;


--
-- TOC entry 3270 (class 2606 OID 16780)
-- Name: tasks tasks_id_priority_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_id_priority_fkey FOREIGN KEY (id_priority) REFERENCES public.priorities(id) NOT VALID;


--
-- TOC entry 3267 (class 2606 OID 16759)
-- Name: tasks tasks_id_responsibility_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tasks
    ADD CONSTRAINT tasks_id_responsibility_fkey FOREIGN KEY (id_responsibility) REFERENCES public.responsibilities(id) NOT VALID;


--
-- TOC entry 3277 (class 2606 OID 16895)
-- Name: transactions transactions_id_buyer_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transactions
    ADD CONSTRAINT transactions_id_buyer_fkey FOREIGN KEY (id_buyer) REFERENCES public.bous(id) NOT VALID;


--
-- TOC entry 3276 (class 2606 OID 16854)
-- Name: transactions transactions_id_item_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transactions
    ADD CONSTRAINT transactions_id_item_fkey FOREIGN KEY (id_item) REFERENCES public.items(id) NOT VALID;


-- Completed on 2022-07-18 15:07:02

--
-- PostgreSQL database dump complete
--

